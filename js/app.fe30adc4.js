(function(){"use strict";var e={5660:function(e,i,a){var t=a(9963),s=(a(7658),a(6252)),n=a(3577),o=a(2262),r=a.p+"img/1479.0498db91.gif",l=a.p+"img/cinema.f323d80d.png";const g={class:"container"},h={class:"header header-content"},c=(0,s._)("a",{href:"./index.html",class:"header__logo"},"Top Films",-1),p=["value"],d=(0,s._)("option",{value:"RATING"},"По рейтингу",-1),u=(0,s._)("option",{value:"YEAR"},"По году",-1),m=[d,u],v=(0,s.uE)('<option value="1">Tриллер</option><option value="2">Драма</option><option value="3">Криминал</option><option value="4">Мелодрама</option><option value="5">Детектив</option><option value="6">Фантастика</option><option value="7">Приключения</option>',7),_=[v],k=(0,s._)("span",null,null,-1),f={class:"container today"},y={class:"movie__today"},w={class:"movie1"},b=["src","alt"],C={class:"movie__info"},F={class:"movie__t"},S={class:"modal__year"},I={class:"container main"},O={class:"loading__box"},z=["src"],D={class:"movies"},Y=["onClick"],j=["src","alt"],M=(0,s._)("div",{class:"movie__cover--darkened"},null,-1),R={class:"movie__info"},A={class:"movie__title"},x={class:"movie__category"},G={key:0,class:"movie__average movie__average--green"},K={key:1,class:"movie__average movie__average--orange"},P={key:2,class:"movie__average movie__average--red"},T={key:3,class:"movie__average movie__average--green"},U={key:4,class:"movie__average movie__average--orange"},N={key:5,class:"movie__average movie__average--red"},E=["onClick"],H={d:"M12 21.593c-5.63-5.539-11-10.297-11-14.402 0-3.791 3.068-5.191 5.281-5.191 1.312 0 4.151.501 5.719 4.457 1.59-3.968 4.464-4.447 5.726-4.447 2.54 0 5.274 1.621 5.274 5.181 0 4.069-5.136 8.625-11 14.402m5.726-20.583c-2.203 0-4.446 1.042-5.726 3.238-1.285-2.206-3.522-3.248-5.719-3.248-3.183 0-6.281 2.187-6.281 6.191 0 4.661 5.571 9.429 12 15.809 6.43-6.38 12-11.148 12-15.809 0-4.011-3.095-6.181-6.274-6.181"},L=["onClick"],J={class:"st0",d:"M17.7,1c-2.2,0-4.4,1-5.7,3.2C10.7,2,8.5,1,6.3,1C3.1,1,0,3.2,0,7.2c0,4.7,5.6,9.4,12,15.8 c6.4-6.4,12-11.1,12-15.8C24,3.2,20.9,1,17.7,1z"},Q={id:"myModal",class:"modal"},V={class:"modal__container"},B=["src","alt"],q={class:"modal__box"},X={class:"modal__title"},W={class:"modal__year"},Z={class:"modal__text"},$={class:"modal__pg"},ee=(0,s.Uk)(),ie={class:"loading__box"},ae=["src"],te=(0,s._)("span",null,"Show more",-1),se=[te],ne={class:"pagination"},oe=["value","onClick"],re=["value","onClick"],le=["value","onClick"],ge={name:"App",setup:()=>({simbol:"",simbolYear:"",simbolYearFrom:""}),data(){return{api:"https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=TOP_100_POPULAR_FILMS",out:"",form:{searchQuery:""},searchQuery:"",page:1,pageString:"&page=",pageCount:0,pagePaginationCount:0,keepOldObj:!0,order:"",orderString:"order=",genres:"",genresString:"genres=",yearFrom:"",yearFromString:"yearFrom=",yearToString:"yearTo=",defaultImg:l,apiArray:[],restaurants:[],restaurant:[],modalRestaurant:[],error:null,visible:!1,loading:!1,loading1:!1,headers:{"Content-Type":"application/json","X-API-KEY":"1795da22-8040-4bf3-9891-a3d9a55cfee9"},likedFilmIds:[]}},methods:{AP(){},async popular(){console.log(this.page),this.page++,0===this.apiArray.length?await this.filter(this.api+this.pageString+this.page.toString()):await this.filterGenres(this.api+this.pageString+this.page.toString()),console.log(this.api+this.pageString+this.page.toString())},async SerchFilms(e){this.page=1,this.api="https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword?keyword="+e,await this.filter(this.api)},async Details(e){void 0!=e&&(this.visible=!0,await this.modal("https://kinopoiskapiunofficial.tech/api/v2.2/films/"+e))},async FilterGenres(){this.page=1,this.apiArray=[],""!=this.genres&&this.apiArray.push(this.genresString+this.genres),""!=this.order&&this.apiArray.push(this.orderString+this.order),""!=this.yearFrom&&this.apiArray.push(this.yearFromString+this.yearFrom+"&"+this.yearToString+this.yearFrom),this.api="https://kinopoiskapiunofficial.tech/api/v2.2/films?"+this.apiArray.join("&"),await this.filterGenres(this.api),this.loading=!1},async filter(e){this.loading=!0,console.log(e);try{const i=await fetch(e,{method:"GET",headers:this.headers}).then(this.checkStatus).then(this.parseJSON);console.log(i),1!=this.page&&this.keepOldObj?this.restaurants=this.restaurants.concat(i.films):(this.restaurants=i.films,this.keepOldObj=!0),this.pageCount=i.pagesCount,this.loading=!1}catch(i){this.error=i}},async modal(e){try{const i=await fetch(e,{method:"GET",headers:this.headers}).then(this.checkStatus).then(this.parseJSON);console.log(i.description),this.modalRestaurant=i}catch(i){this.error=i}},async filterGenres(e){this.loading=!0;try{const i=await fetch(e,{method:"GET",headers:this.headers}).then(this.checkStatus).then(this.parseJSON);console.log(i),1==this.page||1!=this.keepOldObj?(this.restaurants=i.items,this.keepOldObj=!0):this.restaurants=this.restaurants.concat(i.items),this.pageCount=i.totalPages,this.loading=!1,this.loading1=!1}catch(i){this.error=i,this.loading=!1}},parseJSON:function(e){return e.json?e.json():e},checkStatus:function(e){return e.status>=200&&e.status<300?e:this.parseJSON(e).then((e=>{throw e}))},onChange(e){this.simbol=e.target.value,console.log(e.target.value),this.genres=e.target.value,this.FilterGenres(),this.loading1=!0},onChangeYear(e){this.simbolYear=e.target.value,console.log(e.target.value),this.order=e.target.value,this.FilterGenres(),this.loading1=!0},onChangeYearFrom(e){this.simbolYearFrom=e.target.value,console.log(e.target.value),this.yearFrom=e.target.value,this.FilterGenres(),this.loading1=!0},async paginationBtnClick(e){this.keepOldObj=!1,this.page=e,0===this.apiArray.length?await this.filter(this.api+this.pageString+this.page.toString()):await this.filterGenres(this.api+this.pageString+this.page.toString())},searchValue(e){this.searchQuery=e.target.value,console.log(e.target.value),this.SerchFilms(e.target.value)},Like(e){void 0!=e&&this.likedFilmIds.push(e),console.log(e)},disLike(e){this.likedFilmIds.splice(this.likedFilmIds.indexOf(e),1)},drawItems(e){this.popular(e.page++)},getMissingImg(e){return this.restaurants[e]?.posterUrlPreview??this.defaultImg},getMissingName(e){return this.restaurants[e]?.nameRu??" "},getMissingGenres(e){return this.restaurants[e]?.nameRu??" "}},async mounted(){localStorage.likedFilmIds&&(this.likedFilmIds=localStorage.likedFilmIds.split(",").map((e=>Number(e)))),console.log(localStorage.likedFilmIds),this.loading1=!0;try{const e=await fetch(this.api,{method:"GET",headers:this.headers}).then(this.checkStatus).then(this.parseJSON);console.log(e),console.log(Math.floor(101*Math.random())+1),this.pageCount=e.pagesCount,this.restaurants=e.films,this.restaurant=e.films[Math.floor(20*Math.random())+1],this.loading1=!1}catch(e){this.error=e,this.loading1=!1}},watch:{likedFilmIds:{handler:function(e){console.log(e),localStorage.likedFilmIds=e},deep:!0},pageCount(e){this.pagePaginationCount=e<=5?e:5}}};var he=Object.assign(ge,{setup(e){return(e,i)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",g,[(0,s._)("div",h,[c,(0,s.wy)((0,s._)("select",{name:"",id:"year1",class:"header__year1 action","onUpdate:modelValue":i[0]||(i[0]=i=>e.simbolYearFrom=i),onChange:i[1]||(i[1]=i=>e.onChangeYearFrom(i))},[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(100,(e=>(0,s._)("option",{value:e+1922,key:e+1922},(0,n.zw)(e+1922),9,p))),64))],544),[[t.bM,e.simbolYearFrom]]),(0,s.wy)((0,s._)("select",{name:"",id:"year",class:"header__year action","onUpdate:modelValue":i[2]||(i[2]=i=>e.simbolYear=i),onChange:i[3]||(i[3]=i=>e.onChangeYear(i))},m,544),[[t.bM,e.simbolYear]]),(0,s.wy)((0,s._)("select",{name:"",id:"genre",class:"header__genre action","onUpdate:modelValue":i[4]||(i[4]=i=>e.simbol=i),onChange:i[5]||(i[5]=i=>e.onChange(i))},_,544),[[t.bM,e.simbol]]),k,(0,s._)("form",null,[(0,s.wy)((0,s._)("input",{type:"text",class:"header__search",placeholder:"Search",onInput:i[6]||(i[6]=i=>e.searchValue(i)),"onUpdate:modelValue":i[7]||(i[7]=i=>e.form.searchQuery=i)},null,544),[[t.nr,e.form.searchQuery]])])])]),(0,s._)("div",f,[(0,s._)("div",y,[(0,s._)("div",w,[(0,s._)("img",{src:e.restaurant?.posterUrlPreview,alt:e.restaurant?.nameRu??"wtf",class:"movie__cover1"},null,8,b),(0,s._)("div",C,[(0,s._)("div",F,(0,n.zw)(e.restaurant?.nameRu),1),(0,s._)("p",S,(0,n.zw)(e.restaurant?.year),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.restaurant?.genres,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"movie__c",key:e?.genre},(0,n.zw)(e?.genre),1)))),128))])])])]),(0,s._)("div",I,[(0,s.Uk)((0,n.zw)(e.searchQuery)+" ",1),(0,s._)("div",O,[(0,s.wy)((0,s._)("span",null,[(0,s._)("img",{class:"loading",src:(0,o.SU)(r),alt:"loading"},null,8,z)],512),[[t.F8,e.loading1]])]),(0,s._)("div",D,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.restaurants,((i,a)=>((0,s.wg)(),(0,s.iD)("div",{class:"movie",key:i.kinopoiskId??i.filmId},[(0,s._)("div",{class:"movie__cover-inner",onClick:a=>e.Details(i.kinopoiskId??i.filmId)},[(0,s._)("img",{src:e.getMissingImg(a),alt:e.getMissingName(a),class:"movie__cover"},null,8,j),M],8,Y),(0,s._)("div",R,[(0,s._)("div",A,(0,n.zw)(e.getMissingName(a)),1),(0,s._)("div",x,(0,n.zw)(i?.genres?.map((e=>e?.genre)).join(", ")??" "),1),i?.rating>=7?((0,s.wg)(),(0,s.iD)("div",G,(0,n.zw)(i?.rating),1)):i?.rating>5?((0,s.wg)(),(0,s.iD)("div",K,(0,n.zw)(i?.rating),1)):i?.rating<=5?((0,s.wg)(),(0,s.iD)("div",P,(0,n.zw)(i?.rating),1)):(0,s.kq)("",!0),i?.ratingKinopoisk>=7?((0,s.wg)(),(0,s.iD)("div",T,(0,n.zw)(i?.ratingKinopoisk),1)):i?.ratingKinopoisk>5?((0,s.wg)(),(0,s.iD)("div",U,(0,n.zw)(i?.ratingKinopoisk),1)):i?.ratingKinopoisk<=5?((0,s.wg)(),(0,s.iD)("div",N,(0,n.zw)(i?.ratingKinopoisk),1)):(0,s.kq)("",!0),(0,s._)("div",null,[(0,s.wy)(((0,s.wg)(),(0,s.iD)("svg",{onClick:a=>e.Like(i.filmId??i.kinopoiskId),class:"movie__svg movie__svg--white",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},[(0,s.wy)((0,s._)("path",H,null,512),[[t.F8,!e.likedFilmIds.includes(i.filmId??i.kinopoiskId)]])],8,E)),[[t.F8,!e.likedFilmIds.includes(i.filmId??i.kinopoiskId)]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("svg",{onClick:a=>e.disLike(i.filmId??i.kinopoiskId),class:"movie__svg movie__svg--red",width:"24",height:"24","xml:space":"preserve"},[(0,s.wy)((0,s._)("path",J,null,512),[[t.F8,e.likedFilmIds.includes(i.filmId??i.kinopoiskId)]])],8,L)),[[t.F8,e.likedFilmIds.includes(i.filmId??i.kinopoiskId)]])])])])))),128))])]),(0,s.wy)((0,s._)("div",Q,[(0,s._)("span",{class:"close",onClick:i[8]||(i[8]=i=>e.visible=!1)},"×"),(0,s._)("div",V,[(0,s._)("img",{class:"modal-content",id:"img01",src:e.modalRestaurant?.posterUrlPreview,alt:e.modalRestaurant?.nameOriginal},null,8,B),(0,s._)("div",q,[(0,s._)("h4",X,(0,n.zw)(e.modalRestaurant?.nameOriginal),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.modalRestaurant?.genres,(e=>((0,s.wg)(),(0,s.iD)("h5",{class:"modal__genre",key:e},(0,n.zw)(e?.genre),1)))),128)),(0,s._)("p",W,(0,n.zw)(e.modalRestaurant?.year),1),(0,s._)("div",Z,(0,n.zw)(e.modalRestaurant?.description),1),(0,s._)("p",$,(0,n.zw)(e.modalRestaurant?.ratingAgeLimits),1)])])],512),[[t.F8,e.visible]]),ee,(0,s._)("div",ie,[(0,s.wy)((0,s._)("span",null,[(0,s._)("img",{class:"loading",src:(0,o.SU)(r),alt:"loading"},null,8,ae)],512),[[t.F8,e.loading]])]),(0,s._)("button",{class:"next__page",onClick:i[9]||(i[9]=i=>e.popular())},se),(0,s._)("div",ne,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(2,(i=>(0,s.wy)((0,s._)("button",{class:(0,n.C_)([{btnhover:e.page==i+e.page-5},"btn"]),value:i+e.page-5,key:i+e.page-5,onClick:a=>e.paginationBtnClick(i+e.page-5)},(0,n.zw)(i+e.page-5),11,oe),[[t.F8,i+e.page-5>=e.pageCount-4&&i+e.page-5<=e.pageCount-3]]))),64)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.pagePaginationCount,(i=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{class:(0,n.C_)([{btnhover:e.page==i+e.page-3},"btn"]),value:i+e.page-3,key:i+e.page-3,onClick:a=>e.paginationBtnClick(i+e.page-3)},(0,n.zw)(i+e.page-3),11,re)),[[t.F8,i+e.page-3>=1&&i+e.page-3<=e.pageCount]]))),128)),((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(2,(i=>(0,s.wy)((0,s._)("button",{class:(0,n.C_)([{btnhover:e.page==i+e.page+2},"btn"]),value:i+e.page+2,key:i+e.page+2,onClick:a=>e.paginationBtnClick(i+e.page+2)},(0,n.zw)(i+e.page+2),11,le),[[t.F8,i+e.page+2>=4&&i+e.page+2<=5]]))),64))])],64))}});const ce=he;var pe=ce;const de=(0,t.ri)(pe);de.mount("#app")}},i={};function a(t){var s=i[t];if(void 0!==s)return s.exports;var n=i[t]={exports:{}};return e[t](n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(i,t,s,n){if(!t){var o=1/0;for(h=0;h<e.length;h++){t=e[h][0],s=e[h][1],n=e[h][2];for(var r=!0,l=0;l<t.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((function(e){return a.O[e](t[l])}))?t.splice(l--,1):(r=!1,n<o&&(o=n));if(r){e.splice(h--,1);var g=s();void 0!==g&&(i=g)}}return i}n=n||0;for(var h=e.length;h>0&&e[h-1][2]>n;h--)e[h]=e[h-1];e[h]=[t,s,n]}}(),function(){a.d=function(e,i){for(var t in i)a.o(i,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:i[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)}}(),function(){a.p=""}(),function(){var e={143:0};a.O.j=function(i){return 0===e[i]};var i=function(i,t){var s,n,o=t[0],r=t[1],l=t[2],g=0;if(o.some((function(i){return 0!==e[i]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var h=l(a)}for(i&&i(t);g<o.length;g++)n=o[g],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(h)},t=self["webpackChunkmy_app"]=self["webpackChunkmy_app"]||[];t.forEach(i.bind(null,0)),t.push=i.bind(null,t.push.bind(t))}();var t=a.O(void 0,[998],(function(){return a(5660)}));t=a.O(t)})();
//# sourceMappingURL=app.fe30adc4.js.map